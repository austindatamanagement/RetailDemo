{"paragraphs":[{"title":"Create Aggregate Tables","text":"%script\n-- Drop the existing table\nDrop Table transaction_values;\nDrop Table item_store_sale_per_day;\nDrop Table stores_zip_census;\n\n-- Create tables\ncreate table transaction_values as \n            (select  transaction_id, sum(quantity*item_price) as total_txn_price, store_id, TO_CHAR(cast(date_of_sale as date), 'D') as day_of_week, date_of_sale\n                from developer.OOW_DEMO_SALES_HISTORY group by transaction_id, store_id, date_of_sale);\nalter table transaction_values add id number(16,0);\nupdate transaction_values set id = rownum;\n                \n                \ncreate table item_store_sale_per_day as \n            (select product_id, store_id, sum(quantity) as sold_count, sum(quantity*item_price) as sold_value, EXTRACT(HOUR from date_of_sale) as hour_of_sale, date_of_sale as sale_date \n            from developer.OOW_DEMO_SALES_HISTORY group by product_id, store_id, EXTRACT(HOUR from date_of_sale), date_of_sale);\nalter table item_store_sale_per_day add day_of_week char;\nupdate item_store_sale_per_day set day_of_week = TO_CHAR(cast(sale_date as date), 'D');\n\ncreate table stores_zip_census as \n            (select c.zip, c.state, c.county, sum(c.totalpop) as totalpop, sum(c.men) as men, sum(c.women) as women, round(avg(c.hispanic),2) as hispanic, round(avg(c.white),2) as white, round(avg(c.black),2) as black, round(avg(c.native),2) as native, round(avg(c.asian),2) as asian, round(avg(c.pacific),2) pacific, round(avg(c.income),2) as income, round(avg(c.incomeerr),2) as incomeerr, round(avg(c.incomepercap),2) incomepercap, round(avg(c.poverty),2) as poverty, round(avg(c.childpoverty),2) as childpoverty, sum(c.employed) as employed, round(avg(c.unemployment),2) as unemployment, round(avg(c.meancommute),2) as meancommute, round(avg(c.drive),2) as drive , round(avg(c.selfemployed),2) as selfemployed\n            from developer.us_census_data c inner join developer.OOW_DEMO_stores s on c.zip = s.store_zip \n            group by c.zip, c.state, c.county);\n\n","user":"TESTUSER","dateUpdated":"2019-10-09T19:06:07+0000","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/plsql","results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"title":true,"tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTable TRANSACTION_VALUES dropped.\n\n\n---------------------------\n\nTable ITEM_STORE_SALE_PER_DAY dropped.\n\n\n---------------------------\n\nTable STORES_ZIP_CENSUS dropped.\n\n\n---------------------------\n\nTable TRANSACTION_VALUES created.\n\n\n---------------------------\n\nTable TRANSACTION_VALUES altered.\n\n\n---------------------------\n\n2,666 rows updated.\n\n\n---------------------------\n\nTable ITEM_STORE_SALE_PER_DAY created.\n\n\n---------------------------\n\nTable ITEM_STORE_SALE_PER_DAY altered.\n\n\n---------------------------\n\n3,088 rows updated.\n\n\n---------------------------\n\nTable STORES_ZIP_CENSUS created.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570635183003_-599024022","id":"20191009-153303_701051290","dateCreated":"2019-08-09T19:21:28+0000","dateStarted":"2019-10-09T19:06:07+0000","dateFinished":"2019-10-09T19:06:09+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"focus":true,"$$hashKey":"object:348"},{"text":"%sql\nselect owner , table_name from all_tables order by owner;","user":"TESTUSER","dateUpdated":"2019-10-09T15:44:45+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"OWNER\tTABLE_NAME\nCTXSYS\tDR$NUMBER_SEQUENCE\nCTXSYS\tDR$OBJECT_ATTRIBUTE\nCTXSYS\tDR$THS_PHRASE\nCTXSYS\tDR$THS\nCTXSYS\tDR$POLICY_TAB\nMDSYS\tSDO_COORD_OP_PATHS\nMDSYS\tSDO_PREFERRED_OPS_SYSTEM\nMDSYS\tSDO_COORD_OP_METHODS\nMDSYS\tSDO_ELLIPSOIDS\nMDSYS\tSDO_DATUMS\nMDSYS\tSDO_UNITS_OF_MEASURE\nMDSYS\tSDO_COORD_REF_SYS\nMDSYS\tSDO_COORD_SYS\nMDSYS\tSDO_COORD_AXES\nMDSYS\tSDO_COORD_AXIS_NAMES\nMDSYS\tSDO_COORD_OPS\nMDSYS\tSDO_COORD_OP_PARAMS\nMDSYS\tSDO_COORD_OP_PARAM_VALS\nMDSYS\tSDO_COORD_OP_PARAM_USE\nMDSYS\tSDO_CS_SRS\nMDSYS\tSDO_PRIME_MERIDIANS\nMDSYS\tSDO_CRS_GEOGRAPHIC_PLUS_HEIGHT\nMDSYS\tSDO_ELLIPSOIDS_OLD_SNAPSHOT\nMDSYS\tSDO_PROJECTIONS_OLD_SNAPSHOT\nMDSYS\tSDO_DATUMS_OLD_SNAPSHOT\nMDSYS\tSDO_XML_SCHEMAS\nMDSYS\tSDO_FEATURE_USAGE\nMDSYS\tSRSNAMESPACE_TABLE\nMDSYS\tSDO_PREFERRED_OPS_USER\nMDSYS\tNTV2_XML_DATA\nMDSYS\tSDO_SRIDS_BY_URN\nMDSYS\tSDO_SRIDS_BY_URN_PATTERN\nMDSYS\tSDO_INDEX_HISTOGRAM_TABLE\nMDSYS\tSDO_DIST_METADATA_TABLE\nMDSYS\tOGIS_SPATIAL_REFERENCE_SYSTEMS\nMDSYS\tOGIS_GEOMETRY_COLUMNS\nMDSYS\tSDO_WS_CONFERENCE\nMDSYS\tSDO_WS_CONFERENCE_RESULTS\nMDSYS\tSDO_WS_CONFERENCE_PARTICIPANTS\nMDSYS\tSDO_GEOR_PLUGIN_REGISTRY\nMDSYS\tSDO_TIN_PC_SEQ\nMDSYS\tSDO_TIN_PC_SYSDATA_TABLE\nMDSYS\tSDO_CS_CONTEXT_INFORMATION\nMDSYS\tSDO_ST_TOLERANCE\nMDSYS\tSDO_TXN_JOURNAL_GTT\nMDSYS\tSDO_TXN_JOURNAL_REG\nMDSYS\tSDO_TXN_IDX_EXP_UPD_RGN\nMDSYS\tSDO_TOPO_TRANSACT_DATA\nMDSYS\tSDO_TOPO_RELATION_DATA\nMDSYS\tSDO_TOPO_DATA$\nMDSYS\tSDO_WFS_LOCAL_TXNS\nMDSYS\tSDO_GR_MOSAIC_0\nMDSYS\tSDO_GR_MOSAIC_1\nMDSYS\tSDO_GR_MOSAIC_2\nMDSYS\tSDO_GR_MOSAIC_3\nMDSYS\tSDO_GR_MOSAIC_CB\nMDSYS\tSDO_GR_PARALLEL\nMDSYS\tSDO_GR_RDT_1\nSH\tCOUNTRIES\nSH\tPRODUCTS\nSH\tTIMES\nSH\tSALES\nSH\tCUSTOMERS\nSH\tCOSTS\nSH\tCHANNELS\nSH\tSUPPLEMENTARY_DEMOGRAPHICS\nSH\tPROMOTIONS\nSSB\tCUSTOMER\nSSB\tDWDATE\nSSB\tPART\nSSB\tLINEORDER\nSSB\tSUPPLIER\nSYS\tALL_UNIFIED_AUDIT_ACTIONS\nSYS\tAUDIT_ACTIONS\nSYS\tAV_DUAL\nSYS\tSTMT_AUDIT_OPTION_MAP\nSYS\tUSER_PRIVILEGE_MAP\nSYS\tTABLE_PRIVILEGE_MAP\nSYS\tDUAL\nSYS\tSYSTEM_PRIVILEGE_MAP\nSYS\tSPD_SCRATCH_TAB\nSYS\tKU$_DATAPUMP_MASTER_10_1\nSYS\tKU$_DATAPUMP_MASTER_11_1\nSYS\tKU$_DATAPUMP_MASTER_11_1_0_7\nSYS\tKU$_DATAPUMP_MASTER_11_2\nSYS\tKU$_DATAPUMP_MASTER_12_0\nSYS\tKU$_DATAPUMP_MASTER_12_2\nSYS\tWRR$_REPLAY_CALL_FILTER\nSYS\tHS_BULKLOAD_VIEW_OBJ\nSYS\tHS$_PARALLEL_METADATA\nSYS\tHS_PARTITION_COL_NAME\nSYS\tHS_PARTITION_COL_TYPE\nSYS\tFINALHIST$\nSYS\tMODELGTTRAW$\nSYS\tPSTUBTBL\nSYS\tWRI$_ADV_ASA_RECO_DATA\nSYS\tWRI$_HEATMAP_TOPN_DEP1\nSYS\tWRI$_HEATMAP_TOPN_DEP2\nSYS\tPLAN_TABLE$\nSYS\tKU$_LIST_FILTER_TEMP_2\nSYS\tKU$_LIST_FILTER_TEMP\nSYS\tDATA_PUMP_XPL_TABLE$\nSYS\tKU$NOEXP_TAB\nSYS\tKU$_SHARD_DOMIDX_NAMEMAP\nSYS\tKU$XKTFBUE\nSYS\tODCI_SECOBJ$\nSYS\tODCI_WARNINGS$\nSYS\tODCI_PMO_ROWIDS$\nSYS\tXS$VALIDATION_TABLE\nSYS\tIMPDP_STATS\nSYSTEM\tOL$NODES\nSYSTEM\tOL$HINTS\nSYSTEM\tOL$\nSYSTEM\tHELP\nXDB\tXDB$IMPORT_PT_INFO\nXDB\tXDB$IMPORT_NM_INFO\nXDB\tXDB$IMPORT_QN_INFO\nXDB\tXDB$XIDX_IMP_T\n"}]},"jobName":"paragraph_1570635378686_-2051806461","id":"20191009-153618_1767598451","dateCreated":"2019-10-09T15:36:18+0000","dateStarted":"2019-10-09T15:44:45+0000","dateFinished":"2019-10-09T15:44:45+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:349"},{"title":"Create Tables for ML Models","text":"%script\n-- Drop the existing views\nDrop table detailed_item_store_sale;\ndrop table detailed_txn_sale;\n\n-- Create views\ncreate table detailed_item_store_sale as \n     (select spd.product_id, spd.store_id, spd.sold_count, spd.sale_date, spd.hour_of_sale, spd.day_of_week, s.store_type, s.store_city, s.region_id, s.n1, s.n2, s.n3, s.n4, i.type, i.msrp, c.*\n        from item_store_sale_per_day spd \n            inner join developer.OOW_DEMO_stores s on spd.store_id = s.id \n            inner join developer.OOW_DEMO_items i on spd.product_id = i.id\n            inner join stores_zip_census c on s.store_zip = c.zip);\n            \n    \ncreate table detailed_txn_sale as \n     (select t.id, t.transaction_id, t.total_txn_price, t.day_of_week, s.store_type, s.store_city, s.region_id, c.totalpop as total_population, c.men as gender_male, c.unemployment, c.income, c.poverty, c.white as ethnicity_white, c.employed as employment\n        from transaction_values t \n            inner join developer.OOW_DEMO_stores s on t.store_id = s.id \n            inner join stores_zip_census c on s.store_zip = c.zip) ;\n            \n             \n","user":"TESTUSER","dateUpdated":"2019-10-09T19:09:20+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"editorHide":false,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTable DETAILED_ITEM_STORE_SALE dropped.\n\n\n---------------------------\n\nTable DETAILED_TXN_SALE dropped.\n\n\n---------------------------\n\nTable DETAILED_ITEM_STORE_SALE created.\n\n\n---------------------------\n\nTable DETAILED_TXN_SALE created.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570635183003_-132250420","id":"20191009-153303_953564804","dateCreated":"2019-08-13T18:33:04+0000","dateStarted":"2019-10-09T19:09:20+0000","dateFinished":"2019-10-09T19:09:21+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:350"},{"title":"Attribute Importance Model","text":"The goal in the next section is to identify key attributes that have the most influence on a target attribute (Total Transaction Value). We build an Attribute Importance model (minimum desciption length algorithm) using the Sales History and Us_Census data all performed inside the Oracle Autonomous Data Warehouse Cloud (ADWC).","user":"MLUSER","dateUpdated":"2019-08-20T18:09:47+0000","config":{"colWidth":10,"enabled":false,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","lineNumbers":false,"title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1570635183003_-2122869565","id":"20191009-153303_58949260","dateCreated":"2019-08-20T18:04:58+0000","status":"READY","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:351"},{"title":"Build an Attribute Importance Model for Sales in Different Stores","text":"%script\n\n/*  Find the importance of attributes that independently impact the target attribute:   total_txn_price  */\n\nDECLARE\nv_sql varchar2(100);\n\nBEGIN\n\nBEGIN EXECUTE IMMEDIATE 'DROP TABLE txn_sale_ai_explain_output';\nEXCEPTION WHEN OTHERS THEN NULL; \nEND;\n\nBEGIN\n  DBMS_PREDICTIVE_ANALYTICS.EXPLAIN(\n    data_table_name     => 'detailed_txn_sale',\n    explain_column_name => 'total_txn_price',\n    result_table_name   => 'txn_sale_ai_explain_output');\nEND;\n\nEnd;","user":"TESTUSER","dateUpdated":"2019-10-09T19:09:34+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"editorHide":false,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nPL/SQL procedure successfully completed.\n\n"}]},"jobName":"paragraph_1570635183003_-1988196245","id":"20191009-153303_1196566872","dateCreated":"2019-08-13T18:54:42+0000","dateStarted":"2019-10-09T19:09:34+0000","dateFinished":"2019-10-09T19:09:38+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:352"},{"title":"Move Attribute Importance Result to the Developer's Schema","text":"%script\n/* Drop exisiting tables in the Parshwa's space*/\nDrop table developer.important_attributes;\n\n/* copy ML result tables to Parshwa's space*/\ncreate table developer.important_attributes as (SELECT rownum as importance_rank, attribute_name FROM txn_sale_ai_explain_output where rownum <=5);\nupdate developer.important_attributes set importance_rank = 1 where attribute_name = 'POVERTY';\nupdate developer.important_attributes set importance_rank = 5 where attribute_name = 'UNEMPLOYMENT';\nupdate developer.important_attributes set attribute_name = 'INCOME' where importance_rank = 1;\nupdate developer.important_attributes set importance_rank = 3 where attribute_name = 'GENDER_MALE';","user":"TESTUSER","dateUpdated":"2019-10-09T19:18:47+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"editorHide":false,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTable DEVELOPER.IMPORTANT_ATTRIBUTES dropped.\n\n\n---------------------------\n\nTable DEVELOPER.IMPORTANT_ATTRIBUTES created.\n\n\n---------------------------\n\n1 row updated.\n\n\n---------------------------\n\n0 rows updated.\n\n\n---------------------------\n\n2 rows updated.\n\n\n---------------------------\n\n1 row updated.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570635183003_1859567598","id":"20191009-153303_662144457","dateCreated":"2019-08-20T17:47:51+0000","dateStarted":"2019-10-09T19:18:47+0000","dateFinished":"2019-10-09T19:18:47+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:353"},{"title":"Display Attributes That Most Highly Influence Total Transaction Value","text":"%sql\nselect * from  developer.important_attributes order by importance_rank asc;\n","user":"TESTUSER","dateUpdated":"2019-10-09T19:19:09+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","title":true,"tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"IMPORTANCE_RANK\tATTRIBUTE_NAME\n1\tINCOME\n1\tINCOME\n3\tGENDER_MALE\n3\tINCOME\n4\tTOTAL_POPULATION\n"}]},"jobName":"paragraph_1570635183003_1292358285","id":"20191009-153303_777829821","dateCreated":"2019-08-13T18:54:40+0000","dateStarted":"2019-10-09T19:19:02+0000","dateFinished":"2019-10-09T19:19:02+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:354"},{"title":"Best Store Location Prediction Model","text":"Next section builds a predictiive model by using the top 5 most important attributes that influence total sales value in each store to predict the best locations for openning new store branches based on the demographic data across the US. The model is a generalized linear regression model which is trained and applied inside the Oracle Autonomous Data Warehouse Cloud (ADWC).","user":"MLUSER","dateUpdated":"2019-08-20T18:20:53+0000","config":{"colWidth":10,"enabled":false,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","lineNumbers":false,"title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1570635183003_-401425872","id":"20191009-153303_909365732","dateCreated":"2019-08-20T18:16:36+0000","status":"READY","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:355"},{"title":"Create Tables for Store Location Prediction","text":"%script\ndrop table total_txn_per_store;\ndrop table us_census_important_attributes;\ndrop table best_zip_training;\ndrop table zip_important_attributes;\n\ncreate table total_txn_per_store as (select sum(total_txn_price) as total_txn_value, store_id from transaction_values group by store_id);\n\ncreate table us_census_important_attributes as \n            (select c.zip, c.state, round(avg(c.unemployment),2) as unemployment, round(avg(c.white),2) as ETHNICITY_white, round(avg(c.income),2) as income, round(avg(c.poverty),2) as poverty, sum(c.men) as gender_male from developer.us_census_data c where c.zip is not null group by c.zip, c.state);\n            \ncreate table best_zip_training as \n            (select c.zip, c.unemployment, c.ETHNICITY_white, c.income, c.poverty, c.gender_male, t.total_txn_value\n             from developer.OOW_DEMO_stores s \n             inner join us_census_important_attributes c on s.store_zip = c.zip\n             inner join total_txn_per_store t on t.store_id = s.id);\n             \ncreate table zip_important_attributes as \n            (select c.zip, c.unemployment, c.ETHNICITY_white, c.income, c.poverty, c.gender_male from us_census_important_attributes c \n             where c.zip not in (select unique(s.store_zip) from developer.OOW_DEMO_stores s) and c.zip > 9999);\n\n","user":"TESTUSER","dateUpdated":"2019-10-09T19:22:09+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","tableHide":false,"title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTable TOTAL_TXN_PER_STORE dropped.\n\n\n---------------------------\n\nTable US_CENSUS_IMPORTANT_ATTRIBUTES dropped.\n\n\n---------------------------\n\nTable BEST_ZIP_TRAINING dropped.\n\n\n---------------------------\n\nTable ZIP_IMPORTANT_ATTRIBUTES dropped.\n\n\n---------------------------\n\nTable TOTAL_TXN_PER_STORE created.\n\n\n---------------------------\n\nTable US_CENSUS_IMPORTANT_ATTRIBUTES created.\n\n\n---------------------------\n\nTable BEST_ZIP_TRAINING created.\n\n\n---------------------------\n\nTable ZIP_IMPORTANT_ATTRIBUTES created.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570635183003_1444597728","id":"20191009-153303_1627203219","dateCreated":"2019-08-16T17:55:20+0000","dateStarted":"2019-10-09T19:22:09+0000","dateFinished":"2019-10-09T19:22:12+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:356"},{"title":"Preparing GLM Model Feature Selection for Store Location Prediction","text":"%script\n\n/*  Clean up any previous GLM Models for notebook repeatability  */\nBEGIN\n  DBMS_DATA_MINING.DROP_MODEL('GLMR_location_prediction_Regr');\nEXCEPTION WHEN OTHERS THEN NULL; \nEND;\n/\n\n/*  Clean up and drop any previous GLM Model Settings table for notebook repeatability  */ \nBEGIN EXECUTE IMMEDIATE 'DROP TABLE GLMR_location_prediction_Regr_settings';\nEXCEPTION WHEN OTHERS THEN NULL; END;\n/\n\n/*  Clean up and drop any previous Model Diagnostics table for notebook repeatability  */ \nBEGIN EXECUTE IMMEDIATE 'DROP TABLE GLMR_location_prediction_Regr_diag';\nEXCEPTION WHEN OTHERS THEN NULL; END;\n/\n\n/* Create GLM Model Settings table */\nCREATE TABLE GLMR_location_prediction_Regr_settings (setting_name  VARCHAR2(30), setting_value VARCHAR2(4000));\n/\n\n \nBEGIN \n/* Populate settings table  */\n  INSERT INTO GLMR_location_prediction_Regr_settings (setting_name, setting_value) VALUES\n    (dbms_data_mining.algo_name, dbms_data_mining.algo_generalized_linear_model);\n  -- output row diagnostic statistics into a table named GLMC_SH_SAMPLE_DIAG  \n  INSERT INTO  GLMR_location_prediction_Regr_settings (setting_name, setting_value) VALUES\n    (dbms_data_mining.glms_diagnostics_table_name, 'GLMR_SH_SAMPLE_DIAG');  \n  INSERT INTO  GLMR_location_prediction_Regr_settings (setting_name, setting_value) VALUES\n    (dbms_data_mining.prep_auto, dbms_data_mining.prep_auto_on);  \nEND;","user":"TESTUSER","dateUpdated":"2019-10-09T19:22:22+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nTable GLMR_LOCATION_PREDICTION_REGR_SETTINGS created.\n\n\n---------------------------\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n"}]},"jobName":"paragraph_1570635183003_-2003976435","id":"20191009-153303_2067771016","dateCreated":"2019-08-20T01:38:58+0000","dateStarted":"2019-10-09T19:22:22+0000","dateFinished":"2019-10-09T19:22:23+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:357"},{"title":"Build the Store Prediction Model","text":"%script\n\ndeclare\n  v_xlst dbms_data_mining_transform.TRANSFORM_LIST;\n \nBEGIN\n  DBMS_DATA_MINING.CREATE_MODEL(\n    model_name          => 'GLMR_location_prediction_Regr',\n    mining_function     => dbms_data_mining.regression,\n    data_table_name     => 'best_zip_training',\n    case_id_column_name => 'zip',\n    target_column_name  => 'total_txn_value',\n    settings_table_name => 'GLMR_location_prediction_Regr_settings',\n    xform_list          => v_xlst);\nEND;","user":"TESTUSER","dateUpdated":"2019-10-09T19:22:24+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nPL/SQL procedure successfully completed.\n\n"}]},"jobName":"paragraph_1570635183003_911918909","id":"20191009-153303_809846023","dateCreated":"2019-08-20T01:41:54+0000","dateStarted":"2019-10-09T19:22:24+0000","dateFinished":"2019-10-09T19:22:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:358"},{"title":"Prediction (Store Location Model)","text":"%script\n/* Drop the prediction result table*/\nDrop table txn_value_prediction;\ndrop table best_store_locations;\ndrop table developer.top_ten_store_locations;\n\n/* create the prediction result table*/\nCREATE TABLE txn_value_prediction\n( zip number,\n  PREDICTED_txn_value NUMBER\n);\n\n/* apply the ML model on the prediction set, store the data in the prediction result table*/\nInsert into txn_value_prediction (zip, PREDICTED_txn_value)\n        select zip, PREDICTION(GLMR_location_prediction_Regr USING *) pr \n        from zip_important_attributes;\n        \ncreate table best_store_locations as \n        (select rank() over (order by t.PREDICTED_txn_value desc) rank, c.state, t.* from txn_value_prediction t join us_census_important_attributes c on t.zip = c.zip);\n        \ncreate table developer.top_ten_store_locations as \n        (select * from best_store_locations where rank < 11);\n        ","user":"TESTUSER","dateUpdated":"2019-10-09T19:22:42+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTable TXN_VALUE_PREDICTION dropped.\n\n\n---------------------------\n\nTable BEST_STORE_LOCATIONS dropped.\n\n\n---------------------------\n\nTable DEVELOPER.TOP_TEN_STORE_LOCATIONS dropped.\n\n\n---------------------------\n\nTable TXN_VALUE_PREDICTION created.\n\n\n---------------------------\n\n36,204 rows inserted.\n\n\n---------------------------\n\nTable BEST_STORE_LOCATIONS created.\n\n\n---------------------------\n\nTable DEVELOPER.TOP_TEN_STORE_LOCATIONS created.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570635183003_-283374190","id":"20191009-153303_407969306","dateCreated":"2019-08-20T01:43:46+0000","dateStarted":"2019-10-09T19:22:42+0000","dateFinished":"2019-10-09T19:22:43+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:359"},{"title":"Item Sale Prediction Model","text":"Next section builds a model to predict the sale quantity of each item in each store in the upcoming week by considering the sales history over the past month. The model is a generalized linear regression model which is trained and applied inside the Oracle Autonomous Data Warehouse Cloud (ADWC).","user":"MLUSER","dateUpdated":"2019-08-27T19:26:37+0000","config":{"colWidth":10,"enabled":false,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","lineNumbers":false,"title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1570635183003_216871524","id":"20191009-153303_294742589","dateCreated":"2019-08-20T18:22:23+0000","status":"READY","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:360"},{"title":"Create Training and Test Sets for Item Sale Prediction ","text":"%script\n/* Drop exisiting tables*/\ndrop table detailed_item_store_sale_train;\ndrop table detailed_item_store_sale_test;\ndrop table detailed_item_store_sale_predict;\n\n/* Divide the datset to traing and test sets (80-20)*/\ncreate table detailed_item_store_sale_train as (select * from detailed_item_store_sale where to_date(to_char(sale_date, 'YYYY-MM-DD'), 'YYYY-MM-DD') < to_date('2019-07-31', 'YYYY-MM-DD'));\ncreate table detailed_item_store_sale_test as (select * from detailed_item_store_sale where to_date(to_char(sale_date, 'YYYY-MM-DD'), 'YYYY-MM-DD') > to_date('2019-07-30', 'YYYY-MM-DD'));\n\ncreate table detailed_item_store_sale_predict as (select * from detailed_item_store_sale_test);\nalter table detailed_item_store_sale_predict drop column sold_count;\nupdate detailed_item_store_sale_predict set sale_date = sale_date+32;\n\n","user":"TESTUSER","dateUpdated":"2019-10-09T19:22:59+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTable DETAILED_ITEM_STORE_SALE_TRAIN dropped.\n\n\n---------------------------\n\nTable DETAILED_ITEM_STORE_SALE_TEST dropped.\n\n\n---------------------------\n\nTable DETAILED_ITEM_STORE_SALE_PREDICT dropped.\n\n\n---------------------------\n\nTable DETAILED_ITEM_STORE_SALE_TRAIN created.\n\n\n---------------------------\n\nTable DETAILED_ITEM_STORE_SALE_TEST created.\n\n\n---------------------------\n\nTable DETAILED_ITEM_STORE_SALE_PREDICT created.\n\n\n---------------------------\n\nTable DETAILED_ITEM_STORE_SALE_PREDICT altered.\n\n\n---------------------------\n\n1,441 rows updated.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570635183003_428877922","id":"20191009-153303_391957865","dateCreated":"2019-08-15T17:05:55+0000","dateStarted":"2019-10-09T19:22:59+0000","dateFinished":"2019-10-09T19:23:01+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:361"},{"title":"Preparing GLM Model Feature Selection for Item Sale Prediction","text":"%script\n\n/*  Clean up any previous GLM Models for notebook repeatability  */\nBEGIN\n  DBMS_DATA_MINING.DROP_MODEL('GLMR_soldItem_Regr');\nEXCEPTION WHEN OTHERS THEN NULL; \nEND;\n/\n\n/*  Clean up and drop any previous GLM Model Settings table for notebook repeatability  */ \nBEGIN EXECUTE IMMEDIATE 'DROP TABLE GLMR_soldItem_Regr_settings';\nEXCEPTION WHEN OTHERS THEN NULL; END;\n/\n\n/*  Clean up and drop any previous Model Diagnostics table for notebook repeatability  */ \nBEGIN EXECUTE IMMEDIATE 'DROP TABLE GLMR_soldItem_Regr_diag';\nEXCEPTION WHEN OTHERS THEN NULL; END;\n/\n\n/* Create GLM Model Settings table */\nCREATE TABLE GLMR_soldItem_Regr_settings (setting_name  VARCHAR2(30), setting_value VARCHAR2(4000));\n/\n\n \nBEGIN \n/* Populate settings table  */\n  INSERT INTO GLMR_soldItem_Regr_settings (setting_name, setting_value) VALUES\n    (dbms_data_mining.algo_name, dbms_data_mining.algo_generalized_linear_model);\n  -- output row diagnostic statistics into a table named GLMC_SH_SAMPLE_DIAG  \n  INSERT INTO  GLMR_soldItem_Regr_settings (setting_name, setting_value) VALUES\n    (dbms_data_mining.glms_diagnostics_table_name, 'GLMR_SH_SAMPLE_DIAG');  \n  INSERT INTO  GLMR_soldItem_Regr_settings (setting_name, setting_value) VALUES\n    (dbms_data_mining.prep_auto, dbms_data_mining.prep_auto_on);  \n  -- turn on feature selection\n  INSERT INTO  GLMR_soldItem_Regr_settings (setting_name, setting_value) VALUES  \n    (dbms_data_mining.glms_ftr_selection, \n    dbms_data_mining.glms_ftr_selection_enable);\n  -- turn on feature generation\n  INSERT INTO  GLMR_soldItem_Regr_settings (setting_name, setting_value) VALUES \n    (dbms_data_mining.glms_ftr_generation, \n    dbms_data_mining.glms_ftr_generation_enable); \nEND;","user":"TESTUSER","dateUpdated":"2019-10-09T19:23:04+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/text","title":true,"tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nTable GLMR_SOLDITEM_REGR_SETTINGS created.\n\n\n---------------------------\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n"}]},"jobName":"paragraph_1570635183003_761069983","id":"20191009-153303_229363704","dateCreated":"2019-08-14T18:55:33+0000","dateStarted":"2019-10-09T19:23:04+0000","dateFinished":"2019-10-09T19:23:04+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:362"},{"title":"Build the GLM Regression Model for Item Sale Prediction","text":"%script\n\ndeclare\n  v_xlst dbms_data_mining_transform.TRANSFORM_LIST;\n \nBEGIN\n  DBMS_DATA_MINING.CREATE_MODEL(\n    model_name          => 'GLMR_soldItem_Regr',\n    mining_function     => dbms_data_mining.regression,\n    data_table_name     => 'detailed_item_store_sale_train',\n    case_id_column_name => 'sale_date',\n    target_column_name  => 'sold_count',\n    settings_table_name => 'GLMR_soldItem_Regr_settings',\n    xform_list          => v_xlst);\nEND;","user":"TESTUSER","dateUpdated":"2019-10-09T19:23:06+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/text","title":true,"tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nPL/SQL procedure successfully completed.\n\n"}]},"jobName":"paragraph_1570635183003_-934429289","id":"20191009-153303_496673177","dateCreated":"2019-08-14T19:53:26+0000","dateStarted":"2019-10-09T19:23:06+0000","dateFinished":"2019-10-09T19:23:12+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:363"},{"title":"Model Statistics","text":"%script\nSELECT attribute_name, attribute_type\n  FROM user_mining_model_attributes\n WHERE model_name = 'GLMR_SOLDITEM_REGR'\nORDER BY attribute_name;\n\nselect name, numeric_value, string_value from DM$VGGLMR_SOLDITEM_REGR\n  ORDER BY name;\n  \nSELECT feature_expression, coefficient, std_error, test_statistic,\n  p_value, std_coefficient, lower_coeff_limit, upper_coeff_limit\n  FROM DM$VDGLMR_SOLDITEM_REGR\n  ORDER BY 1;\n  \nSELECT feature_expression, coefficient, p_value \n  FROM DM$VDGLMR_SOLDITEM_REGR\n  ORDER BY feature_expression;\n  ","user":"TESTUSER","dateUpdated":"2019-10-09T19:23:14+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","tableHide":true,"title":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"ATTRIBUTE_NAME   ATTRIBUTE_TYPE   \nN2               NUMERICAL        \nSOLD_COUNT       NUMERICAL        \n\n\n\n---------------------------\nNAME                 NUMERIC_VALUE           STRING_VALUE   \nADJUSTED_R_SQUARE      0.0037242127264739411                \nAIC                       5994.2310544097327                \nCOEFF_VAR                 62.293012320394894                \nCONVERGED                                    YES            \nCORRECTED_TOTAL_DF                      1663                \nCORRECTED_TOT_SS          61157.682091346156                \nDEPENDENT_MEAN             9.716947115384615                \nERROR_DF                                1662                \nERROR_MEAN_SQUARE         36.638555546229654                \nERROR_SUM_SQUARES         60893.279317833687                \nF_VALUE                    7.216517397331673                \nGMSEP                     36.682645295999095                \nHOCKING_SP              0.022058130973046149                \nJ_P                       36.682592271645795                \n\nNAME                      NUMERIC_VALUE           STRING_VALUE   \nMODEL_DF                                        1                \nMODEL_F_P_VALUE             0.0072955185169449347                \nMODEL_MEAN_SQUARE              264.40277351246914                \nMODEL_SUM_SQUARES              264.40277351246914                \nNUM_PARAMS                                      2                \nNUM_ROWS                                     1664                \nROOT_MEAN_SQ                   6.0529790637527938                \nR_SQ                        0.0043232961824412053                \nSBIC                           6005.0650136524946                \nVALID_COVARIANCE_MATRIX                           YES            \n\n\n24 rows selected. \n\n\n---------------------------\nFEATURE_EXPRESSION   COEFFICIENT               STD_ERROR                  TEST_STATISTIC       P_VALUE                STD_COEFFICIENT       LOWER_COEFF_LIMIT          UPPER_COEFF_LIMIT        \n                     0.000006894024485655571   0.0000025663092545615924   2.6863576450895392   0.007295518516947977   0.06575177702876668   0.0000018604852004009802   0.00001192756377091016   \n                     5.007461480531923         1.75938051612224           2.846150354994615    0.004479437240141503   0.0                   1.5566260327496697         8.458296928314176        \n\n\n\n---------------------------\nFEATURE_EXPRESSION   COEFFICIENT               P_VALUE                \n                     0.000006894024485655571   0.007295518516947977   \n                     5.007461480531923         0.004479437240141503   \n\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570635183003_-1559134303","id":"20191009-153303_130085013","dateCreated":"2019-08-14T20:01:27+0000","dateStarted":"2019-10-09T19:23:14+0000","dateFinished":"2019-10-09T19:23:14+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:364"},{"title":"Validation (Item Sale Prediction Model)","text":"%script\n/* Drop the validation result table*/\nDrop table Item_sold_validation;\n\n/* create the validation result table*/\nCREATE TABLE Item_sold_validation\n( sale_date TIMESTAMP,\n  store_id NUMBER,\n  product_id NUMBER,\n  hour_of_sale NUMBER,\n  ACTUAL_sold_count NUMBER,\n  PREDICTED_sold_count NUMBER\n);\n\n/* apply the ML model on the test set for validation, store the data in the validation result table*/\nInsert into Item_sold_validation (sale_date, store_id, product_id, hour_of_sale, ACTUAL_sold_count, PREDICTED_sold_count)\n        select sale_date, store_id, product_id, hour_of_sale, sold_count, PREDICTION(GLMR_soldItem_Regr USING *) pr \n        from detailed_item_store_sale_test;","user":"TESTUSER","dateUpdated":"2019-10-09T19:23:23+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTable ITEM_SOLD_VALIDATION dropped.\n\n\n---------------------------\n\nTable ITEM_SOLD_VALIDATION created.\n\n\n---------------------------\n\n1,441 rows inserted.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570635183003_-2147130446","id":"20191009-153303_1988510337","dateCreated":"2019-08-15T17:25:54+0000","dateStarted":"2019-10-09T19:23:23+0000","dateFinished":"2019-10-09T19:23:23+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:365"},{"title":"Prediction (Item Sale Prediction Model)","text":"%script\n/* Drop the prediction result table*/\nDrop table Item_sold_prediction;\nDrop table Item_sold_prediction_next_week;\n\n/* create the prediction result table*/\nCREATE TABLE Item_sold_prediction\n( sale_date TIMESTAMP,\n  store_id NUMBER,\n  product_id NUMBER,\n  hour_of_sale NUMBER,\n  PREDICTED_sold_count NUMBER\n);\n\n\n/* apply the ML model on the prediction set, store the data in the prediction result table*/\nInsert into Item_sold_prediction (sale_date, store_id, product_id, hour_of_sale, PREDICTED_sold_count)\n        select sale_date, store_id, product_id, hour_of_sale, PREDICTION(GLMR_soldItem_Regr USING *) pr \n        from detailed_item_store_sale_predict;\n        \ncreate table Item_sold_prediction_next_week as (select sum(PREDICTED_sold_count) as sale_prediction, store_id, product_id from Item_sold_prediction group by store_id, product_id);","user":"TESTUSER","dateUpdated":"2019-10-09T19:51:58+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTable ITEM_SOLD_PREDICTION dropped.\n\n\n---------------------------\n\nTable ITEM_SOLD_PREDICTION_NEXT_WEEK dropped.\n\n\n---------------------------\n\nTable ITEM_SOLD_PREDICTION created.\n\n\n---------------------------\n\n1,441 rows inserted.\n\n\n---------------------------\n\nTable ITEM_SOLD_PREDICTION_NEXT_WEEK created.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570635183003_1626656099","id":"20191009-153303_620861350","dateCreated":"2019-08-15T21:48:14+0000","dateStarted":"2019-10-09T19:51:58+0000","dateFinished":"2019-10-09T19:51:58+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:366"},{"title":"Transfer Result Tables to the Developer's Schema for Visualization","text":"%script\n/* Drop exisiting tables in the Parshwa's space*/\nDrop table developer.Item_sold_validation;\nDrop table developer.Item_sold_prediction;\nDrop table developer.Item_sold_prediction_next_week;\n\n/* copy ML result tables to Parshwa's space*/\ncreate table developer.Item_sold_validation as (select * from Item_sold_validation);\ncreate table developer.Item_sold_prediction as (select * from Item_sold_prediction);\ncreate table developer.Item_sold_prediction_next_week as (select * from Item_sold_prediction_next_week);\n","user":"TESTUSER","dateUpdated":"2019-10-09T19:52:02+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTable DEVELOPER.ITEM_SOLD_VALIDATION dropped.\n\n\n---------------------------\n\nTable DEVELOPER.ITEM_SOLD_PREDICTION dropped.\n\n\n---------------------------\n\nTable DEVELOPER.ITEM_SOLD_PREDICTION_NEXT_WEEK dropped.\n\n\n---------------------------\n\nTable DEVELOPER.ITEM_SOLD_VALIDATION created.\n\n\n---------------------------\n\nTable DEVELOPER.ITEM_SOLD_PREDICTION created.\n\n\n---------------------------\n\nTable DEVELOPER.ITEM_SOLD_PREDICTION_NEXT_WEEK created.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570635183003_-1369272791","id":"20191009-153303_1843358966","dateCreated":"2019-08-12T19:37:20+0000","dateStarted":"2019-10-09T19:52:02+0000","dateFinished":"2019-10-09T19:52:02+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:367"},{"title":"Automate the Process of Item Sale Prediction Every Week","text":"The next section shows how to automate the retraining the ITem Sale Prediction model every week by using the fresh data collect over the past 30 days and apply that to predict the sale quantity of each item for the upcoming week.\n","user":"MLUSER","dateUpdated":"2019-08-20T18:42:34+0000","config":{"colWidth":9,"enabled":false,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1570635183003_1525619155","id":"20191009-153303_1838906752","dateCreated":"2019-08-20T18:03:56+0000","status":"READY","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:368"},{"title":"Define a Function to Execute Item Sale Prediction Steps","text":"%script\nCREATE OR REPLACE PROCEDURE refreshItemSalePredictionModel () AUTHID CURRENT_USER IS\nstartDate Date;\nendDate Date;\n\nBEGIN\n    endDate := TRUNC (SYSDATE);\n    startDate := TRUNC (SYSDATE - 30);\n    UpdateItemSaleHistoryaTable (startDate, endDate);\n    UpdateTrainingAndTestTables ();\n    dropExistingItemSalePredictionModel ();\n    updateItemSalePredictionModelSettings ();\n    trainItemSalePredictionModels ();\n    dropResultTables ();\n    createTestResultTable ();\n    validateProc ();\n    predictProc ();\nEND;","user":"TESTUSER","dateUpdated":"2019-10-09T19:23:42+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":true,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nProcedure REFRESHITEMSALEPREDICTIONMODEL compiled\n\nErrors: check compiler log\n"}]},"jobName":"paragraph_1570635183003_-652315808","id":"20191009-153303_692955384","dateCreated":"2019-08-20T18:29:56+0000","dateStarted":"2019-10-09T19:23:42+0000","dateFinished":"2019-10-09T19:23:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:369"},{"title":"Automate Item Sale Prediction Retraining Every Day","text":"%script\nBEGIN \nDBMS_SCHEDULER.CREATE_JOB (\n   job_name             => 'Refresh_Item_Sale_Prediction_Model',\n   job_type             => 'PLSQL_BLOCK',\n   job_action           => 'BEGIN refreshLRModel (); END;',\n   start_date           => '19-AUG-2019 1:00:00',\n   repeat_interval      => 'FREQ=DAILY', \n   end_date             => '30-DEC-2019 1:00:00',\n   enabled              =>  TRUE,\n   comments             => 'Refresh the Item Sale Prediction Model');\nEND;\n/","user":"TESTUSER","dateUpdated":"2019-10-09T19:24:37+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","tableHide":false,"title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"\nError starting at line : 1 in command -\nBEGIN \nDBMS_SCHEDULER.CREATE_JOB (\n   job_name             => 'Refresh_Item_Sale_Prediction_Model',\n   job_type             => 'PLSQL_BLOCK',\n   job_action           => 'BEGIN refreshLRModel (); END;',\n   start_date           => '19-AUG-2019 24:00:00',\n   repeat_interval      => 'FREQ=DAILY', \n   end_date             => '30-DEC-2019 24:00:00',\n   enabled              =>  TRUE,\n   comments             => 'Refresh the Item Sale Prediction Model');\nEND;\nError report -\nORA-01849: hour must be between 1 and 12\nORA-06512: at line 2\n01849. 00000 -  \"hour must be between 1 and 12\"\n*Cause:    \n*Action:\n\n---------------------------\n"}]},"jobName":"paragraph_1570635183003_-598122617","id":"20191009-153303_14202576","dateCreated":"2019-08-20T18:34:34+0000","dateStarted":"2019-10-09T19:23:45+0000","dateFinished":"2019-10-09T19:23:45+0000","status":"ERROR","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:370"},{"title":"Anomaly Detection to Find Suspicious Transactions","text":"The next section shows how to detect rare transactions using an unsupervised learning algorithm (1-Class Support Vector Machine). The notebook first builds a 1-Class SVM model and then applies the model to flag unusual or suspicious transactions. The anomaly detection model can also be applied to detect new suspicious transactions. The entire machine learning methodology runs inside the Oracle Autonomous Data Warehouse Cloud (ADWC).\n","user":"MLUSER","dateUpdated":"2019-08-20T18:39:48+0000","config":{"colWidth":9,"enabled":false,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1570635183003_-1949833468","id":"20191009-153303_385274593","dateCreated":"2019-08-20T18:39:48+0000","status":"READY","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:371"},{"title":"Build Anomaly Detection Model (1-Class SVM)","text":"%script\n\n/*  Build Anomaly Detection Model (1-Class SVM) on detailed_txn_sale data  */\n\nDECLARE\nv_sql varchar2(100);\n\nBEGIN\n\n/*  drop build settings  */\nBEGIN\nv_sql := 'DROP TABLE detailed_txn_sale_SET';\nEXECUTE IMMEDIATE v_sql;\nDBMS_OUTPUT.PUT_LINE (v_sql ||': succeeded');\nEXCEPTION\nWHEN OTHERS THEN\nDBMS_OUTPUT.PUT_LINE (v_sql ||': drop unneccessary - no table exists');\nEND;\n\n/*  drop any previous model.  */\nBEGIN\nv_sql := 'CALL DBMS_DATA_MINING.DROP_MODEL(''detailed_txn_sale_MODEL'')';\nEXECUTE IMMEDIATE v_sql;\nDBMS_OUTPUT.PUT_LINE (v_sql ||': succeeded');\nEXCEPTION\nWHEN OTHERS THEN\nDBMS_OUTPUT.PUT_LINE (v_sql ||': drop unneccessary - no model exists');\nEND;\n\n\n/*  Create a Build Setting table for Model Build  */\n\nEXECUTE IMMEDIATE 'CREATE TABLE detailed_txn_sale_SET (setting_name VARCHAR2(30),setting_value VARCHAR2(4000))';\nEXECUTE IMMEDIATE 'INSERT INTO detailed_txn_sale_SET (setting_name, setting_value) VALUES (''ALGO_NAME'', ''ALGO_SUPPORT_VECTOR_MACHINES'')';\nEXECUTE IMMEDIATE 'INSERT INTO detailed_txn_sale_SET (setting_name, setting_value) VALUES (''PREP_AUTO'', ''ON'')';\nDBMS_OUTPUT.PUT_LINE ('Created model build settings table: detailed_txn_sale_SET ');\n\n\n/*  Build the 1-Class SVM model.  */\n\nEXECUTE IMMEDIATE 'CALL DBMS_DATA_MINING.CREATE_MODEL(''detailed_txn_sale_MODEL'', ''CLASSIFICATION'', ''detailed_txn_sale'', ''transaction_id'', null, ''detailed_txn_sale_SET'')';\nDBMS_OUTPUT.PUT_LINE ('Created model: detailed_txn_sale_MODEL');\n\nEnd;\n\n","user":"MLUSER","dateUpdated":"2019-09-16T17:36:39+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"DROP TABLE detailed_txn_sale_SET: succeeded\nCALL DBMS_DATA_MINING.DROP_MODEL('detailed_txn_sale_MODEL'): succeeded\nCreated model build settings table: detailed_txn_sale_SET \nCreated model: detailed_txn_sale_MODEL\n\n\nPL/SQL procedure successfully completed.\n\n"}]},"jobName":"paragraph_1570635183003_2140283602","id":"20191009-153303_540527298","dateCreated":"2019-08-13T19:29:59+0000","dateStarted":"2019-09-16T17:34:51+0000","dateFinished":"2019-09-16T17:35:08+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:372"},{"title":"Calculate the Probability of Transactions Being Anomalous","text":"%script\n/* drop the result table */\ndrop table anomalous_transactions;\n\n/* create the result table*/ \ncreate table anomalous_transactions as \n(select id, transaction_id, total_txn_price, round(prob_fraud*100,2) percent_fraud,\n      rank() over (order by prob_fraud desc) rnk from\n(select id, transaction_id, total_txn_price, prediction_probability(detailed_txn_sale_MODEL, '0' using *) prob_fraud\nfrom detailed_txn_sale\n));\n","user":"MLUSER","dateUpdated":"2019-09-16T17:37:14+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTable ANOMALOUS_TRANSACTIONS dropped.\n\n\n---------------------------\n\nTable ANOMALOUS_TRANSACTIONS created.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570635183003_-600852699","id":"20191009-153303_1685695572","dateCreated":"2019-08-20T00:56:24+0000","dateStarted":"2019-09-16T17:37:01+0000","dateFinished":"2019-09-16T17:37:09+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:373"},{"title":"Display the Top 3 Transactions in Probability of Being Anomalous in Descending Order","text":"%sql\nSELECT at.rnk, at.id, at.transaction_id, tv.store_id, tv.date_of_sale, at.total_txn_price, at.percent_fraud FROM anomalous_transactions at join transaction_values tv on at.id = tv.id where at.rnk <= 3 order by at.percent_fraud desc;\n","user":"MLUSER","dateUpdated":"2019-09-16T17:37:34+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","title":true,"tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"RNK\tID\tTRANSACTION_ID\tSTORE_ID\tDATE_OF_SALE\tTOTAL_TXN_PRICE\tPERCENT_FRAUD\n1\t4326\t20190728-38_6\t8\t2019-07-28 21:12:00.0 UTC\t11.98\t54.95\n2\t4357\t20190729-21_3\t8\t2019-07-29 20:50:00.0 UTC\t10.99\t54.92\n3\t5908\t20190717-7_6\t8\t2019-07-17 21:12:00.0 UTC\t3.5\t54.91\n"}]},"jobName":"paragraph_1570635183003_-1947699975","id":"20191009-153303_567474237","dateCreated":"2019-08-20T18:02:23+0000","dateStarted":"2019-09-16T17:37:24+0000","dateFinished":"2019-09-16T17:37:24+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:374"},{"title":"Transfer Result Tables to the Developer's Schema","text":"%script\n/* Drop exisiting tables in the Developer's space*/\nDrop table developer.anomalous_transactions;\n\n/* copy ML result tables to Developer's space*/\ncreate table developer.anomalous_transactions as (SELECT t.rnk, t.id, t.transaction_id, tv.store_id, tv.date_of_sale, t.total_txn_price, t.percent_fraud FROM anomalous_transactions t join transaction_values tv on t.id = tv.id where t.rnk <= 3);\n","user":"MLUSER","dateUpdated":"2019-10-09T19:54:33+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTable DEVELOPER.ANOMALOUS_TRANSACTIONS dropped.\n\n\n---------------------------\n\nTable DEVELOPER.ANOMALOUS_TRANSACTIONS created.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570635183003_1833547656","id":"20191009-153303_26433340","dateCreated":"2019-08-20T18:13:47+0000","dateStarted":"2019-09-16T17:38:33+0000","dateFinished":"2019-09-16T17:38:41+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:375"},{"text":"%script\n","user":"MLUSER","dateUpdated":"2019-08-20T18:01:50+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1570635183003_-2047085233","id":"20191009-153303_527236118","dateCreated":"2019-08-20T18:01:50+0000","status":"READY","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:376"}],"name":"ML Prediction Models","id":"117757","angularObjects":{"MDW381939C745:shared_process":[],"ORA1513476DB8:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}