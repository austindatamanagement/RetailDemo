{"paragraphs":[{"title":"Create Aggregate Tables","text":"%script\n-- Drop the existing table\nDrop Table transaction_values;\nDrop Table item_store_sale_per_day;\nDrop Table stores_zip_census;\n\n-- Create tables\ncreate table transaction_values as \n            (select  transaction_id, sum(quantity*item_price) as total_txn_price, store_id, TO_CHAR(cast(date_of_sale as date), 'D') as day_of_week, date_of_sale\n                from developer.OOW_DEMO_SALES_HISTORY group by transaction_id, store_id, date_of_sale);\nalter table transaction_values add id number(16,0);\nupdate transaction_values set id = rownum;\n                \n                \ncreate table item_store_sale_per_day as \n            (select product_id, store_id, sum(quantity) as sold_count, sum(quantity*item_price) as sold_value, EXTRACT(HOUR from date_of_sale) as hour_of_sale, date_of_sale as sale_date \n            from developer.OOW_DEMO_SALES_HISTORY group by product_id, store_id, EXTRACT(HOUR from date_of_sale), date_of_sale);\nalter table item_store_sale_per_day add day_of_week char;\nupdate item_store_sale_per_day set day_of_week = TO_CHAR(cast(sale_date as date), 'D');\n\ncreate table stores_zip_census as \n            (select c.zip, c.state, c.county, sum(c.totalpop) as totalpop, sum(c.men) as men, sum(c.women) as women, round(avg(c.hispanic),2) as hispanic, round(avg(c.white),2) as white, round(avg(c.black),2) as black, round(avg(c.native),2) as native, round(avg(c.asian),2) as asian, round(avg(c.pacific),2) pacific, round(avg(c.income),2) as income, round(avg(c.incomeerr),2) as incomeerr, round(avg(c.incomepercap),2) incomepercap, round(avg(c.poverty),2) as poverty, round(avg(c.childpoverty),2) as childpoverty, sum(c.employed) as employed, round(avg(c.unemployment),2) as unemployment, round(avg(c.meancommute),2) as meancommute, round(avg(c.drive),2) as drive , round(avg(c.selfemployed),2) as selfemployed\n            from developer.us_census c inner join developer.OOW_DEMO_stores s on c.zip = s.store_zip \n            group by c.zip, c.state, c.county);\n\n","user":"TESTUSER","dateUpdated":"2019-10-14T19:06:46+0000","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/plsql","results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"title":true,"tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_-187782350","id":"20191014-180231_1818317282","dateCreated":"2019-08-09T19:21:28+0000","dateStarted":"2019-10-14T19:05:25+0000","dateFinished":"2019-10-14T19:05:26+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"commited":true,"focus":true,"$$hashKey":"object:348"},{"text":"%sql\nselect owner from all_tables order by owner;","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:25+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_188509668","id":"20191014-180231_1075900186","dateCreated":"2019-10-09T15:36:18+0000","dateStarted":"2019-10-14T19:05:26+0000","dateFinished":"2019-10-14T19:05:27+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:349"},{"title":"Create Tables for ML Models","text":"%script\n-- Drop the existing views\nDrop table detailed_item_store_sale;\ndrop table detailed_txn_sale;\n\n-- Create views\ncreate table detailed_item_store_sale as \n     (select spd.product_id, spd.store_id, spd.sold_count, spd.sale_date, spd.hour_of_sale, spd.day_of_week, s.store_type, s.store_city, s.region_id, s.n1, s.n2, s.n3, s.n4, i.type, i.msrp, c.*\n        from item_store_sale_per_day spd \n            inner join developer.OOW_DEMO_stores s on spd.store_id = s.id \n            inner join developer.OOW_DEMO_items i on spd.product_id = i.id\n            inner join stores_zip_census c on s.store_zip = c.zip);\n            \n    \ncreate table detailed_txn_sale as \n     (select t.id, t.transaction_id, t.total_txn_price, t.day_of_week, s.store_type, s.store_city, s.region_id, c.totalpop as total_population, c.men as gender_male, c.unemployment, c.income, c.poverty, c.white as ethnicity_white, c.employed as employment\n        from transaction_values t \n            inner join developer.OOW_DEMO_stores s on t.store_id = s.id \n            inner join stores_zip_census c on s.store_zip = c.zip) ;\n            \n             \n","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:26+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"editorHide":false,"tableHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_-1187260341","id":"20191014-180231_2059246770","dateCreated":"2019-08-13T18:33:04+0000","dateStarted":"2019-10-14T19:05:27+0000","dateFinished":"2019-10-14T19:05:28+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:350"},{"title":"Attribute Importance Model","text":"The goal in the next section is to identify key attributes that have the most influence on a target attribute (Total Transaction Value). We build an Attribute Importance model (minimum desciption length algorithm) using the Sales History and Us_Census data all performed inside the Oracle Autonomous Data Warehouse Cloud (ADWC).","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:27+0000","config":{"colWidth":10,"enabled":false,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","lineNumbers":false,"title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_-1389898466","id":"20191014-180231_624700889","dateCreated":"2019-08-20T18:04:58+0000","status":"READY","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:351","errorMessage":""},{"title":"Build an Attribute Importance Model for Sales in Different Stores","text":"%script\n\n/*  Find the importance of attributes that independently impact the target attribute:   total_txn_price  */\n\nDECLARE\nv_sql varchar2(100);\n\nBEGIN\n\nBEGIN EXECUTE IMMEDIATE 'DROP TABLE txn_sale_ai_explain_output';\nEXCEPTION WHEN OTHERS THEN NULL; \nEND;\n\nBEGIN\n  DBMS_PREDICTIVE_ANALYTICS.EXPLAIN(\n    data_table_name     => 'detailed_txn_sale',\n    explain_column_name => 'total_txn_price',\n    result_table_name   => 'txn_sale_ai_explain_output');\nEND;\n\nEnd;","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:27+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"editorHide":false,"tableHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_605633514","id":"20191014-180231_1135908573","dateCreated":"2019-08-13T18:54:42+0000","dateStarted":"2019-10-14T19:05:28+0000","dateFinished":"2019-10-14T19:05:30+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:352","errorMessage":""},{"title":"Move Attribute Importance Result to the Developer's Schema","text":"%script\n/* Drop exisiting tables in the Parshwa's space*/\nDrop table developer.important_attributes;\n\n/* copy ML result tables to Parshwa's space*/\ncreate table developer.important_attributes as (SELECT rownum as importance_rank, attribute_name FROM txn_sale_ai_explain_output where rownum <=5);\nupdate developer.important_attributes set importance_rank = 1 where attribute_name = 'POVERTY';\nupdate developer.important_attributes set importance_rank = 5 where attribute_name = 'UNEMPLOYMENT';\nupdate developer.important_attributes set attribute_name = 'INCOME' where importance_rank = 1;\nupdate developer.important_attributes set importance_rank = 3 where attribute_name = 'GENDER_MALE';","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:28+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"editorHide":false,"tableHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_-1950302571","id":"20191014-180231_69986702","dateCreated":"2019-08-20T17:47:51+0000","dateStarted":"2019-10-14T19:05:29+0000","dateFinished":"2019-10-14T19:05:30+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:353","errorMessage":""},{"title":"Display Attributes That Most Highly Influence Total Transaction Value","text":"%sql\nselect * from  developer.important_attributes order by importance_rank asc;\n","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:29+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","title":true,"tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_1275979430","id":"20191014-180231_317046197","dateCreated":"2019-08-13T18:54:40+0000","dateStarted":"2019-10-14T19:05:30+0000","dateFinished":"2019-10-14T19:05:30+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:354","errorMessage":""},{"title":"Best Store Location Prediction Model","text":"Next section builds a predictiive model by using the top 5 most important attributes that influence total sales value in each store to predict the best locations for openning new store branches based on the demographic data across the US. The model is a generalized linear regression model which is trained and applied inside the Oracle Autonomous Data Warehouse Cloud (ADWC).","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:29+0000","config":{"colWidth":10,"enabled":false,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","lineNumbers":false,"title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_-1761901097","id":"20191014-180231_1458772181","dateCreated":"2019-08-20T18:16:36+0000","status":"READY","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:355","errorMessage":""},{"title":"Create Tables for Store Location Prediction","text":"%script\ndrop table total_txn_per_store;\ndrop table us_census_important_attributes;\ndrop table best_zip_training;\ndrop table zip_important_attributes;\n\ncreate table total_txn_per_store as (select sum(total_txn_price) as total_txn_value, store_id from transaction_values group by store_id);\n\ncreate table us_census_important_attributes as \n            (select c.zip, c.state, round(avg(c.unemployment),2) as unemployment, round(avg(c.white),2) as ETHNICITY_white, round(avg(c.income),2) as income, round(avg(c.poverty),2) as poverty, sum(c.men) as gender_male from developer.us_census c where c.zip is not null group by c.zip, c.state);\n            \ncreate table best_zip_training as \n            (select c.zip, c.unemployment, c.ETHNICITY_white, c.income, c.poverty, c.gender_male, t.total_txn_value\n             from developer.OOW_DEMO_stores s \n             inner join us_census_important_attributes c on s.store_zip = c.zip\n             inner join total_txn_per_store t on t.store_id = s.id);\n             \ncreate table zip_important_attributes as \n            (select c.zip, c.unemployment, c.ETHNICITY_white, c.income, c.poverty, c.gender_male from us_census_important_attributes c \n             where c.zip not in (select unique(s.store_zip) from developer.OOW_DEMO_stores s) and c.zip > 9999);\n\n","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:30+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","tableHide":false,"title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_-261078157","id":"20191014-180231_831946408","dateCreated":"2019-08-16T17:55:20+0000","dateStarted":"2019-10-14T19:05:31+0000","dateFinished":"2019-10-14T19:05:34+0000","status":"ERROR","errorMessage":"","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:356"},{"title":"Preparing GLM Model Feature Selection for Store Location Prediction","text":"%script\n\n/*  Clean up any previous GLM Models for notebook repeatability  */\nBEGIN\n  DBMS_DATA_MINING.DROP_MODEL('GLMR_location_prediction_Regr');\nEXCEPTION WHEN OTHERS THEN NULL; \nEND;\n/\n\n/*  Clean up and drop any previous GLM Model Settings table for notebook repeatability  */ \nBEGIN EXECUTE IMMEDIATE 'DROP TABLE GLMR_location_prediction_Regr_settings';\nEXCEPTION WHEN OTHERS THEN NULL; END;\n/\n\n/*  Clean up and drop any previous Model Diagnostics table for notebook repeatability  */ \nBEGIN EXECUTE IMMEDIATE 'DROP TABLE GLMR_location_prediction_Regr_diag';\nEXCEPTION WHEN OTHERS THEN NULL; END;\n/\n\n/* Create GLM Model Settings table */\nCREATE TABLE GLMR_location_prediction_Regr_settings (setting_name  VARCHAR2(30), setting_value VARCHAR2(4000));\n/\n\n \nBEGIN \n/* Populate settings table  */\n  INSERT INTO GLMR_location_prediction_Regr_settings (setting_name, setting_value) VALUES\n    (dbms_data_mining.algo_name, dbms_data_mining.algo_generalized_linear_model);\n  -- output row diagnostic statistics into a table named GLMC_SH_SAMPLE_DIAG  \n  INSERT INTO  GLMR_location_prediction_Regr_settings (setting_name, setting_value) VALUES\n    (dbms_data_mining.glms_diagnostics_table_name, 'GLMR_SH_SAMPLE_DIAG');  \n  INSERT INTO  GLMR_location_prediction_Regr_settings (setting_name, setting_value) VALUES\n    (dbms_data_mining.prep_auto, dbms_data_mining.prep_auto_on);  \nEND;","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:31+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_-940424395","id":"20191014-180231_1789564557","dateCreated":"2019-08-20T01:38:58+0000","dateStarted":"2019-10-14T19:05:31+0000","dateFinished":"2019-10-14T19:05:34+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:357","errorMessage":""},{"title":"Build the Store Prediction Model","text":"%script\n\ndeclare\n  v_xlst dbms_data_mining_transform.TRANSFORM_LIST;\n \nBEGIN\n  DBMS_DATA_MINING.CREATE_MODEL(\n    model_name          => 'GLMR_location_prediction_Regr',\n    mining_function     => dbms_data_mining.regression,\n    data_table_name     => 'best_zip_training',\n    case_id_column_name => 'zip',\n    target_column_name  => 'total_txn_value',\n    settings_table_name => 'GLMR_location_prediction_Regr_settings',\n    xform_list          => v_xlst);\nEND;","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:31+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_1178721126","id":"20191014-180231_1428002424","dateCreated":"2019-08-20T01:41:54+0000","dateStarted":"2019-10-14T19:05:34+0000","dateFinished":"2019-10-14T19:05:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:358","errorMessage":""},{"title":"Prediction (Store Location Model)","text":"%script\n/* Drop the prediction result table*/\nDrop table txn_value_prediction;\ndrop table best_store_locations;\ndrop table developer.top_ten_store_locations;\n\n/* create the prediction result table*/\nCREATE TABLE txn_value_prediction\n( zip number,\n  PREDICTED_txn_value NUMBER\n);\n\n/* apply the ML model on the prediction set, store the data in the prediction result table*/\nInsert into txn_value_prediction (zip, PREDICTED_txn_value)\n        select zip, PREDICTION(GLMR_location_prediction_Regr USING *) pr \n        from zip_important_attributes;\n        \ncreate table best_store_locations as \n        (select rank() over (order by t.PREDICTED_txn_value desc) rank, c.state, t.* from txn_value_prediction t join us_census_important_attributes c on t.zip = c.zip);\n        \ncreate table developer.top_ten_store_locations as \n        (select * from best_store_locations where rank < 11);\n        ","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:32+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_1111127217","id":"20191014-180231_459676094","dateCreated":"2019-08-20T01:43:46+0000","dateStarted":"2019-10-14T19:05:35+0000","dateFinished":"2019-10-14T19:05:36+0000","status":"ERROR","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:359","errorMessage":""},{"title":"Item Sale Prediction Model","text":"Next section builds a model to predict the sale quantity of each item in each store in the upcoming week by considering the sales history over the past month. The model is a generalized linear regression model which is trained and applied inside the Oracle Autonomous Data Warehouse Cloud (ADWC).","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:33+0000","config":{"colWidth":10,"enabled":false,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","lineNumbers":false,"title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_44332046","id":"20191014-180231_419907396","dateCreated":"2019-08-20T18:22:23+0000","status":"READY","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:360","errorMessage":""},{"title":"Create Training and Test Sets for Item Sale Prediction ","text":"%script\n/* Drop exisiting tables*/\ndrop table detailed_item_store_sale_train;\ndrop table detailed_item_store_sale_test;\ndrop table detailed_item_store_sale_predict;\n\n/* Divide the datset to traing and test sets (80-20)*/\ncreate table detailed_item_store_sale_train as (select * from detailed_item_store_sale where to_date(to_char(sale_date, 'YYYY-MM-DD'), 'YYYY-MM-DD') < to_date('2019-07-31', 'YYYY-MM-DD'));\ncreate table detailed_item_store_sale_test as (select * from detailed_item_store_sale where to_date(to_char(sale_date, 'YYYY-MM-DD'), 'YYYY-MM-DD') > to_date('2019-07-30', 'YYYY-MM-DD'));\n\ncreate table detailed_item_store_sale_predict as (select * from detailed_item_store_sale_test);\nalter table detailed_item_store_sale_predict drop column sold_count;\nupdate detailed_item_store_sale_predict set sale_date = sale_date+32;\n\n","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:33+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_1765597957","id":"20191014-180231_665297943","dateCreated":"2019-08-15T17:05:55+0000","dateStarted":"2019-10-14T19:05:36+0000","dateFinished":"2019-10-14T19:05:38+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:361","errorMessage":""},{"title":"Preparing GLM Model Feature Selection for Item Sale Prediction","text":"%script\n\n/*  Clean up any previous GLM Models for notebook repeatability  */\nBEGIN\n  DBMS_DATA_MINING.DROP_MODEL('GLMR_soldItem_Regr');\nEXCEPTION WHEN OTHERS THEN NULL; \nEND;\n/\n\n/*  Clean up and drop any previous GLM Model Settings table for notebook repeatability  */ \nBEGIN EXECUTE IMMEDIATE 'DROP TABLE GLMR_soldItem_Regr_settings';\nEXCEPTION WHEN OTHERS THEN NULL; END;\n/\n\n/*  Clean up and drop any previous Model Diagnostics table for notebook repeatability  */ \nBEGIN EXECUTE IMMEDIATE 'DROP TABLE GLMR_soldItem_Regr_diag';\nEXCEPTION WHEN OTHERS THEN NULL; END;\n/\n\n/* Create GLM Model Settings table */\nCREATE TABLE GLMR_soldItem_Regr_settings (setting_name  VARCHAR2(30), setting_value VARCHAR2(4000));\n/\n\n \nBEGIN \n/* Populate settings table  */\n  INSERT INTO GLMR_soldItem_Regr_settings (setting_name, setting_value) VALUES\n    (dbms_data_mining.algo_name, dbms_data_mining.algo_generalized_linear_model);\n  -- output row diagnostic statistics into a table named GLMC_SH_SAMPLE_DIAG  \n  INSERT INTO  GLMR_soldItem_Regr_settings (setting_name, setting_value) VALUES\n    (dbms_data_mining.glms_diagnostics_table_name, 'GLMR_SH_SAMPLE_DIAG');  \n  INSERT INTO  GLMR_soldItem_Regr_settings (setting_name, setting_value) VALUES\n    (dbms_data_mining.prep_auto, dbms_data_mining.prep_auto_on);  \n  -- turn on feature selection\n  INSERT INTO  GLMR_soldItem_Regr_settings (setting_name, setting_value) VALUES  \n    (dbms_data_mining.glms_ftr_selection, \n    dbms_data_mining.glms_ftr_selection_enable);\n  -- turn on feature generation\n  INSERT INTO  GLMR_soldItem_Regr_settings (setting_name, setting_value) VALUES \n    (dbms_data_mining.glms_ftr_generation, \n    dbms_data_mining.glms_ftr_generation_enable); \nEND;","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:34+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/text","title":true,"tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_1920914332","id":"20191014-180231_514869453","dateCreated":"2019-08-14T18:55:33+0000","dateStarted":"2019-10-14T19:05:37+0000","dateFinished":"2019-10-14T19:05:39+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:362","errorMessage":""},{"title":"Build the GLM Regression Model for Item Sale Prediction","text":"%script\n\ndeclare\n  v_xlst dbms_data_mining_transform.TRANSFORM_LIST;\n \nBEGIN\n  DBMS_DATA_MINING.CREATE_MODEL(\n    model_name          => 'GLMR_soldItem_Regr',\n    mining_function     => dbms_data_mining.regression,\n    data_table_name     => 'detailed_item_store_sale_train',\n    case_id_column_name => 'sale_date',\n    target_column_name  => 'sold_count',\n    settings_table_name => 'GLMR_soldItem_Regr_settings',\n    xform_list          => v_xlst);\nEND;","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:35+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/text","title":true,"tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_-131039158","id":"20191014-180231_892340556","dateCreated":"2019-08-14T19:53:26+0000","dateStarted":"2019-10-14T19:05:38+0000","dateFinished":"2019-10-14T19:05:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:363","errorMessage":""},{"title":"Model Statistics","text":"%script\nSELECT attribute_name, attribute_type\n  FROM user_mining_model_attributes\n WHERE model_name = 'GLMR_SOLDITEM_REGR'\nORDER BY attribute_name;\n\nselect name, numeric_value, string_value from DM$VGGLMR_SOLDITEM_REGR\n  ORDER BY name;\n  \nSELECT feature_expression, coefficient, std_error, test_statistic,\n  p_value, std_coefficient, lower_coeff_limit, upper_coeff_limit\n  FROM DM$VDGLMR_SOLDITEM_REGR\n  ORDER BY 1;\n  \nSELECT feature_expression, coefficient, p_value \n  FROM DM$VDGLMR_SOLDITEM_REGR\n  ORDER BY feature_expression;\n  ","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:36+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","tableHide":true,"title":true,"editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_-888743063","id":"20191014-180231_372135369","dateCreated":"2019-08-14T20:01:27+0000","dateStarted":"2019-10-14T19:05:39+0000","dateFinished":"2019-10-14T19:05:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:364","errorMessage":""},{"title":"Validation (Item Sale Prediction Model)","text":"%script\n/* Drop the validation result table*/\nDrop table Item_sold_validation;\n\n/* create the validation result table*/\nCREATE TABLE Item_sold_validation\n( sale_date TIMESTAMP,\n  store_id NUMBER,\n  product_id NUMBER,\n  hour_of_sale NUMBER,\n  ACTUAL_sold_count NUMBER,\n  PREDICTED_sold_count NUMBER\n);\n\n/* apply the ML model on the test set for validation, store the data in the validation result table*/\nInsert into Item_sold_validation (sale_date, store_id, product_id, hour_of_sale, ACTUAL_sold_count, PREDICTED_sold_count)\n        select sale_date, store_id, product_id, hour_of_sale, sold_count, PREDICTION(GLMR_soldItem_Regr USING *) pr \n        from detailed_item_store_sale_test;","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:37+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_-1559324087","id":"20191014-180231_204721159","dateCreated":"2019-08-15T17:25:54+0000","dateStarted":"2019-10-14T19:05:42+0000","dateFinished":"2019-10-14T19:05:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:365","errorMessage":""},{"title":"Prediction (Item Sale Prediction Model)","text":"%script\n/* Drop the prediction result table*/\nDrop table Item_sold_prediction;\nDrop table Item_sold_prediction_next_week;\n\n/* create the prediction result table*/\nCREATE TABLE Item_sold_prediction\n( sale_date TIMESTAMP,\n  store_id NUMBER,\n  product_id NUMBER,\n  hour_of_sale NUMBER,\n  PREDICTED_sold_count NUMBER\n);\n\n\n/* apply the ML model on the prediction set, store the data in the prediction result table*/\nInsert into Item_sold_prediction (sale_date, store_id, product_id, hour_of_sale, PREDICTED_sold_count)\n        select sale_date, store_id, product_id, hour_of_sale, PREDICTION(GLMR_soldItem_Regr USING *) pr \n        from detailed_item_store_sale_predict;\n        \ncreate table Item_sold_prediction_next_week as (select sum(PREDICTED_sold_count) as sale_prediction, store_id, product_id from Item_sold_prediction group by store_id, product_id);","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:38+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_-1935953754","id":"20191014-180231_274271084","dateCreated":"2019-08-15T21:48:14+0000","dateStarted":"2019-10-14T19:05:42+0000","dateFinished":"2019-10-14T19:05:43+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:366","errorMessage":""},{"title":"Transfer Result Tables to the Developer's Schema for Visualization","text":"%script\n/* Drop exisiting tables in the Parshwa's space*/\nDrop table developer.Item_sold_validation;\nDrop table developer.Item_sold_prediction;\nDrop table developer.Item_sold_prediction_next_week;\n\n/* copy ML result tables to Parshwa's space*/\ncreate table developer.Item_sold_validation as (select * from Item_sold_validation);\ncreate table developer.Item_sold_prediction as (select * from Item_sold_prediction);\ncreate table developer.Item_sold_prediction_next_week as (select * from Item_sold_prediction_next_week);\n","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:38+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_-1871818626","id":"20191014-180231_630594114","dateCreated":"2019-08-12T19:37:20+0000","dateStarted":"2019-10-14T19:05:43+0000","dateFinished":"2019-10-14T19:05:43+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:367","errorMessage":""},{"title":"Automate the Process of Item Sale Prediction Every Week","text":"The next section shows how to automate the retraining the ITem Sale Prediction model every week by using the fresh data collect over the past 30 days and apply that to predict the sale quantity of each item for the upcoming week.\n","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:39+0000","config":{"colWidth":9,"enabled":false,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_-622648271","id":"20191014-180231_1098027812","dateCreated":"2019-08-20T18:03:56+0000","status":"READY","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:368","errorMessage":""},{"title":"Define a Function to Execute Item Sale Prediction Steps","text":"%script\nCREATE OR REPLACE PROCEDURE refreshItemSalePredictionModel () AUTHID CURRENT_USER IS\nstartDate Date;\nendDate Date;\n\nBEGIN\n    endDate := TRUNC (SYSDATE);\n    startDate := TRUNC (SYSDATE - 30);\n    UpdateItemSaleHistoryaTable (startDate, endDate);\n    UpdateTrainingAndTestTables ();\n    dropExistingItemSalePredictionModel ();\n    updateItemSalePredictionModelSettings ();\n    trainItemSalePredictionModels ();\n    dropResultTables ();\n    createTestResultTable ();\n    validateProc ();\n    predictProc ();\nEND;","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:40+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":true,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_-280994225","id":"20191014-180231_1395862777","dateCreated":"2019-08-20T18:29:56+0000","dateStarted":"2019-10-14T19:05:43+0000","dateFinished":"2019-10-14T19:05:43+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:369","errorMessage":""},{"title":"Automate Item Sale Prediction Retraining Every Day","text":"%script\nBEGIN \nDBMS_SCHEDULER.CREATE_JOB (\n   job_name             => 'Refresh_Item_Sale_Prediction_Model',\n   job_type             => 'PLSQL_BLOCK',\n   job_action           => 'BEGIN refreshLRModel (); END;',\n   start_date           => '19-AUG-2019 1:00:00',\n   repeat_interval      => 'FREQ=DAILY', \n   end_date             => '30-DEC-2019 1:00:00',\n   enabled              =>  TRUE,\n   comments             => 'Refresh the Item Sale Prediction Model');\nEND;\n/","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:41+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","tableHide":false,"title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_1658045927","id":"20191014-180231_199843736","dateCreated":"2019-08-20T18:34:34+0000","dateStarted":"2019-10-14T19:05:43+0000","dateFinished":"2019-10-14T19:05:43+0000","status":"ERROR","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:370","errorMessage":""},{"title":"Anomaly Detection to Find Suspicious Transactions","text":"The next section shows how to detect rare transactions using an unsupervised learning algorithm (1-Class Support Vector Machine). The notebook first builds a 1-Class SVM model and then applies the model to flag unusual or suspicious transactions. The anomaly detection model can also be applied to detect new suspicious transactions. The entire machine learning methodology runs inside the Oracle Autonomous Data Warehouse Cloud (ADWC).\n","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:41+0000","config":{"colWidth":9,"enabled":false,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_574030860","id":"20191014-180231_515379373","dateCreated":"2019-08-20T18:39:48+0000","status":"READY","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:371","errorMessage":""},{"title":"Build Anomaly Detection Model (1-Class SVM)","text":"%script\n\n/*  Build Anomaly Detection Model (1-Class SVM) on detailed_txn_sale data  */\n\nDECLARE\nv_sql varchar2(100);\n\nBEGIN\n\n/*  drop build settings  */\nBEGIN\nv_sql := 'DROP TABLE detailed_txn_sale_SET';\nEXECUTE IMMEDIATE v_sql;\nDBMS_OUTPUT.PUT_LINE (v_sql ||': succeeded');\nEXCEPTION\nWHEN OTHERS THEN\nDBMS_OUTPUT.PUT_LINE (v_sql ||': drop unneccessary - no table exists');\nEND;\n\n/*  drop any previous model.  */\nBEGIN\nv_sql := 'CALL DBMS_DATA_MINING.DROP_MODEL(''detailed_txn_sale_MODEL'')';\nEXECUTE IMMEDIATE v_sql;\nDBMS_OUTPUT.PUT_LINE (v_sql ||': succeeded');\nEXCEPTION\nWHEN OTHERS THEN\nDBMS_OUTPUT.PUT_LINE (v_sql ||': drop unneccessary - no model exists');\nEND;\n\n\n/*  Create a Build Setting table for Model Build  */\n\nEXECUTE IMMEDIATE 'CREATE TABLE detailed_txn_sale_SET (setting_name VARCHAR2(30),setting_value VARCHAR2(4000))';\nEXECUTE IMMEDIATE 'INSERT INTO detailed_txn_sale_SET (setting_name, setting_value) VALUES (''ALGO_NAME'', ''ALGO_SUPPORT_VECTOR_MACHINES'')';\nEXECUTE IMMEDIATE 'INSERT INTO detailed_txn_sale_SET (setting_name, setting_value) VALUES (''PREP_AUTO'', ''ON'')';\nDBMS_OUTPUT.PUT_LINE ('Created model build settings table: detailed_txn_sale_SET ');\n\n\n/*  Build the 1-Class SVM model.  */\n\nEXECUTE IMMEDIATE 'CALL DBMS_DATA_MINING.CREATE_MODEL(''detailed_txn_sale_MODEL'', ''CLASSIFICATION'', ''detailed_txn_sale'', ''transaction_id'', null, ''detailed_txn_sale_SET'')';\nDBMS_OUTPUT.PUT_LINE ('Created model: detailed_txn_sale_MODEL');\n\nEnd;\n\n","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:42+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_1164172523","id":"20191014-180231_1258703853","dateCreated":"2019-08-13T19:29:59+0000","dateStarted":"2019-10-14T19:05:43+0000","dateFinished":"2019-10-14T19:05:44+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:372","errorMessage":""},{"title":"Calculate the Probability of Transactions Being Anomalous","text":"%script\n/* drop the result table */\ndrop table anomalous_transactions;\n\n/* create the result table*/ \ncreate table anomalous_transactions as \n(select id, transaction_id, total_txn_price, round(prob_fraud*100,2) percent_fraud,\n      rank() over (order by prob_fraud desc) rnk from\n(select id, transaction_id, total_txn_price, prediction_probability(detailed_txn_sale_MODEL, '0' using *) prob_fraud\nfrom detailed_txn_sale\n));\n","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:42+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_-1973764688","id":"20191014-180231_18412176","dateCreated":"2019-08-20T00:56:24+0000","dateStarted":"2019-10-14T19:05:44+0000","dateFinished":"2019-10-14T19:05:45+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:373","errorMessage":""},{"title":"Display the Top 3 Transactions in Probability of Being Anomalous in Descending Order","text":"%sql\nSELECT at.rnk, at.id, at.transaction_id, tv.store_id, tv.date_of_sale, at.total_txn_price, at.percent_fraud FROM anomalous_transactions at join transaction_values tv on at.id = tv.id where at.rnk <= 3 order by at.percent_fraud desc;\n","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:43+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","title":true,"tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_497823162","id":"20191014-180231_1078753460","dateCreated":"2019-08-20T18:02:23+0000","dateStarted":"2019-10-14T19:05:45+0000","dateFinished":"2019-10-14T19:05:45+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:374","errorMessage":""},{"title":"Transfer Result Tables to the Developer's Schema","text":"%script\n/* Drop exisiting tables in the Developer's space*/\nDrop table developer.anomalous_transactions;\n\n/* copy ML result tables to Developer's space*/\ncreate table developer.anomalous_transactions as (SELECT t.rnk, t.id, t.transaction_id, tv.store_id, tv.date_of_sale, t.total_txn_price, t.percent_fraud FROM anomalous_transactions t join transaction_values tv on t.id = tv.id where t.rnk <= 3);\n","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:44+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_-1805085575","id":"20191014-180231_514798952","dateCreated":"2019-08-20T18:13:47+0000","dateStarted":"2019-10-14T19:05:45+0000","dateFinished":"2019-10-14T19:05:45+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:375","errorMessage":""},{"text":"%script\n","user":"TESTUSER","dateUpdated":"2019-10-14T19:05:44+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1571076151815_2104743940","id":"20191014-180231_1737448563","dateCreated":"2019-08-20T18:01:50+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:376","errorMessage":""}],"name":"ML Prediction Models","id":"120820","angularObjects":{"MDW381939C745:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}